function k({view:v="dayGridMonth",locale:f="en",firstDay:w=1,dayMaxEvents:h=!1,eventContent:r=null,eventClickEnabled:g=!1,eventDragEnabled:d=!1,eventResizeEnabled:c=!1,noEventsClickEnabled:m=!1,dateClickEnabled:D=!1,dateSelectEnabled:o=!1,datesSetEnabled:E=!1,viewDidMountEnabled:S=!1,eventAllUpdatedEnabled:O=!1,hasDateClickContextMenu:C=null,hasDateSelectContextMenu:p=null,hasEventClickContextMenu:z=null,hasNoEventsClickContextMenu:y=null,resources:$=null,resourceLabelContent:i=null,theme:u=null,options:x={},eventAssetUrl:M}){return{init:function(){let n=this.mountCalendar();window.addEventListener("calendar--refresh",()=>{n.refetchEvents()}),this.$wire.on("calendar--set",l=>{n.setOption(l.key,l.value)})},mountCalendar:function(){return EventCalendar.create(this.$el.querySelector("[data-calendar]"),this.getSettings())},getSettings:function(){let n={view:v,locale:f,firstDay:w,dayMaxEvents:h,eventSources:[{events:e=>this.$wire.getEventsJs({...e,tzOffset:-new Date().getTimezoneOffset()})}],resources:$,selectable:o,eventStartEditable:d,eventDurationEditable:c,dayCellFormat:e=>e.getDate().toString()};r!==null&&(n.eventContent=e=>{let t=e.event.extendedProps.model,s=r[t]??r._default;if(s!==void 0)return{html:s}}),i!==null&&(n.resourceLabelContent=e=>{let t=e.resource.extendedProps.model,s=i[t]??i._default;if(s!==void 0)return{html:this.wrapContent(s,e)}}),D&&(n.dateClick=e=>{let t={date:e.date,dateStr:e.dateStr,allDay:e.allDay,view:e.view,resource:e.resource,tzOffset:-new Date().getTimezoneOffset()};console.log("[calendar] dateClick",t),C?this.openContextMenu(e.jsEvent,t,"dateClick"):this.$wire.onDateClickJs(t)}),o&&(n.select=e=>{let t={start:e.start,startStr:e.startStr,end:e.end,endStr:e.endStr,allDay:e.allDay,view:e.view,resource:e.resource,tzOffset:-new Date().getTimezoneOffset()};console.log("[calendar] dateSelect",t),p?this.openContextMenu(e.jsEvent,t,"dateSelect"):this.$wire.onDateSelectJs(t)}),E&&(n.datesSet=e=>{this.$wire.onDatesSetJs({start:e.start,startStr:e.startStr,end:e.end,endStr:e.endStr,view:e.view,tzOffset:-new Date().getTimezoneOffset()})}),g&&(n.eventClick=e=>{try{console.log("[calendar] eventClick",e.event);let t=e.el||e.jsEvent&&e.jsEvent.target||null,s=null;if(t)try{s=Alpine.$data(t)}catch{}if(s&&typeof s.onClick=="function"){s.onClick(e);return}this.$wire.onEventClickJs({event:e.event,view:e.view,tzOffset:-new Date().getTimezoneOffset()})}catch(t){console.error("[calendar] eventClick handler error",t)}}),n.eventResize=async e=>{let t=e.event.durationEditable,s=c;t!==void 0&&(s=t),s&&await this.$wire.onEventResizeJs({event:e.event,oldEvent:e.oldEvent,endDelta:e.endDelta,view:e.view,tzOffset:-new Date().getTimezoneOffset()}).then(a=>{a===!1&&e.revert()})},n.eventDrop=async e=>{let t=e.event.startEditable,s=d;t!==void 0&&(s=t),s&&await this.$wire.onEventDropJs({event:e.event,oldEvent:e.oldEvent,oldResource:e.oldResource,newResource:e.newResource,delta:e.delta,view:e.view,tzOffset:-new Date().getTimezoneOffset()}).then(a=>{a===!1&&e.revert()})},n.eventDidMount=e=>{e.el.classList.contains("ec-preview")||(e.el.setAttribute("data-calendar-event","1"),e.el.setAttribute("x-load"),e.el.setAttribute("x-load-src",M),e.el.setAttribute("x-data",`calendarEvent({
                    event: ${JSON.stringify(e.event)},
                    timeText: "${e.timeText}",
                    view: ${JSON.stringify(e.view)},
                    hasContextMenu: ${z},
                })`))},m&&(n.noEventsClick=e=>{let t={view:e.view,tzOffset:-new Date().getTimezoneOffset()};y?this.openContextMenu(e.jsEvent,t,"noEventsClick"):this.$wire.onNoEventsClickJs(t)}),S&&(n.viewDidMount=e=>{this.$wire.onViewDidMountJs({view:e.view,tzOffset:-new Date().getTimezoneOffset()})}),O&&(n.eventAllUpdated=e=>{this.$wire.onEventAllUpdatedJs({view:e.view,tzOffset:-new Date().getTimezoneOffset()})}),u&&(n.theme=function(e){return{...e,...u}});let l={...n,...x};return console.debug("[calendar] Final settings",l),l},wrapContent:function(n,l){let e=document.createElement("div");return e.innerHTML=n,e.setAttribute("x-data",JSON.stringify(l)),e.classList.add("w-full"),e.outerHTML},openContextMenu:function(n,l,e){let t=document.querySelector("[calendar-context-menu]"),s=Alpine.$data(t);console.debug("[calendar] openContextMenu",e,l),s.loadActions(e,l),s.openMenu(n)}}}export{k as default};
